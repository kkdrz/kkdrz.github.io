{"componentChunkName":"component---src-templates-blog-post-js","path":"/custom-annotation-processor/","result":{"data":{"site":{"siteMetadata":{"title":"Konrad Drozd: Blog"}},"markdownRemark":{"id":"2159c8f3-f569-5685-be5d-e68b5a3bb21a","excerpt":"Have you ever written code that you felt could be generated without any problems?\nIt happened to me many times. That’s why I decided to share my experience with…","html":"<p>Have you ever written code that you felt could be generated without any problems?\nIt happened to me many times. That’s why I decided to share my experience with you :)</p>\n<p>In this post I will show you <strong>how to create some custom annotations and generate code based on them</strong>.\nIf you want to go straight to the code, you can find it <a href=\"https://github.com/kkdrz/blog-examples/tree/main/annotation-processing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">on my GitHub</a>.</p>\n<h1>When to use?</h1>\n<p>Although code generation is enjoyable (at least for me) be careful not to overdo it.\nSometimes it is a short fragment that is not worth automating.\nThe decision as to whether to automate or generate something can be made on the basis of the following questions:</p>\n<p><strong>1. Will it take me less time to automate it than to do it X times?</strong></p>\n<p>I don’t think it needs explaining. You may ask: <em>but what is X? Is it 3, 5, 10?</em>\nThere is no single correct answer. You have to guess (or maybe you know) how many times in the future you will have to repeat this task.\nSometimes it’s hard to estimate it, in that case I use 3.</p>\n<p><strong>2. Is the procedure always the same and only the inputs change?</strong></p>\n<p>This is a very strong premise for automating code.\nEven if you assume that you may not have to repeat the procedure in the future, you usually have to.\nAnd then you thank yourself for automating something in time.</p>\n<p><strong>3. Is the result of this procedure dependent on another part of the code and may result in inconsistencies in the project if not done?</strong></p>\n<p>It often happens that some parts of the code depend on each other.\nSo whenever you modify the A code, you have to modify the B code and failing to do so\nwill result in inconsistency that can be difficult to debug.\nAn example could be older servers that do not support annotations and need XML descriptors for Java code.</p>\n<h1>Example</h1>\n<p>I will show an example based on a problem that occurred recently in my project at work.\nSuppose we have a service that accepts some messages:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">pl<span class=\"token punctuation\">.</span>kdrozd<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>annotationprocessor</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DeployableService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n     * Method automatically called by the server\n     * on each message received.\n     *\n     * @param message received message\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Message</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// process the message</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * Allows to store user id in one session\n     * The implementation is resolved by the server,\n     * but you need to inform it about the userId property\n     * via XML descriptor.\n     *\n     * @param id user id\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setUserId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * Allows to retrieve user id set by {@link DeployableService#setUserId(String)}.\n     *\n     * @return user id or null if not set\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getUserId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">onMessage</code> method is triggered on each new message,\nbut you may need to save some data from first message\nand access it when next message arrives.\nThe server that we use allows that via abstract methods.\nYou just need to create abstract setter, getter and register the field in the descriptor.\nActually, the whole <code class=\"language-text\">DeployableService</code> needs to be registered in the descriptor so that the server knows about it.</p>\n<p>This is what the descriptor may look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-xml line-numbers\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>deployable-unit</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>handler</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>class</span><span class=\"token punctuation\">></span></span>pl.kdrozd.examples.annotation.DeployableService<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>class</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session-fields</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>field</span><span class=\"token punctuation\">></span></span>userId<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>field</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>session-fields</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>handler</span><span class=\"token punctuation\">></span></span>\n\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>deployable-unit</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This example is short and greatly simplified, but when you create many handlers\nand applications the descriptor becomes huge and hard to maintain.\nTherefore it is a good idea to automate the generation of such code.\nBesides, I prefer to have these things in one place.\nThanks to this, I can immediately see that I forgot to register a field\ninstead of wasting time on unsuccesfull build, deploy and debugging.</p>\n<p>So I wish I had something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">pl<span class=\"token punctuation\">.</span>kdrozd<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>annotationprocessor</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Handler</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DeployableService</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Message</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// process the message</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@SessionField</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setUserId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getUserId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>We could also generate <code class=\"language-text\">setUserId</code> and <code class=\"language-text\">getUserId</code>, but let’s keep it simple.</em></p>\n<p>As you can see, there are two new self-explaining annotations: <code class=\"language-text\">@Handler</code> and <code class=\"language-text\">@SessionField</code>.\nBased on this class, we can easily generate the descriptor.</p>\n<h2>Annotation processing module</h2>\n<p>Let’s create a new separate Gradle module (<code class=\"language-text\">annotation-processor</code>) so that we can reuse\nthe annotation processor in other projects as well.\nIts integration with our application will also be easier.</p>\n<h3>Annotations</h3>\n<p>Defining a custom annotation is very simple and looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">pl<span class=\"token punctuation\">.</span>kdrozd<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>annotationprocessor</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Retention</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Target</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Retention</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">.</span>SOURCE<span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Target</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">.</span>TYPE<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">Handler</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">pl<span class=\"token punctuation\">.</span>kdrozd<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>annotationprocessor</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Retention</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Target</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Retention</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">.</span>SOURCE<span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Target</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">.</span>METHOD<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">SessionField</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">@interface</code> tells Java that it is an annotation.</p>\n<p><code class=\"language-text\">@Retention</code> indicates how long annotations with the annotated type are to be retained.\nIn other words, at what stage do you need them.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">SOURCE</code></td>\n<td>Discarded by compiler. Not needed after compilation completed. Not written to the bytecode.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">CLASS</code></td>\n<td>Discarded by class loader. It is recorded in the <code class=\"language-text\">.class</code> file, but not available in a runtime.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">RUNTIME</code></td>\n<td>Not discarded at all. Available at runtime (available for reflection).</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">@Target</code> - indicates the contexts in which an annotation type is applicable.\nAllows to define what can be annotated with this annotation: <code class=\"language-text\">CONSTRUCTOR</code>, <code class=\"language-text\">METHOD</code>, <code class=\"language-text\">FIELD</code>…?</p>\n<p>More on that <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/annotation/package-summary.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">in the javadoc</a> :)</p>\n<h3>Annotation processor</h3>\n<p>To use the annotations, we need to create a piece of code to process them.\nIt is as simple as extending <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.compiler/javax/annotation/processing/AbstractProcessor.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">AbstractProcessor</code></a> class.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">pl<span class=\"token punctuation\">.</span>kdrozd<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>annotationprocessor</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>auto<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AutoService</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>processing<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SourceVersion</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>element<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TypeElement</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Set</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@SupportedAnnotationTypes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"pl.kdrozd.examples.annotationprocessor.Handler\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"pl.kdrozd.examples.annotationprocessor.SessionField\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@SupportedSourceVersion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SourceVersion</span><span class=\"token punctuation\">.</span>RELEASE_11<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DescriptorProcessor</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractProcessor</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">TypeElement</span><span class=\"token punctuation\">></span></span> set<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RoundEnvironment</span> roundEnvironment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">@SupportedAnnotationTypes</code> - defines which annotations are supported by this processor</p>\n<p><code class=\"language-text\">@SupportedSourceVersion</code> - sets supported JDK version</p>\n<p>In the <code class=\"language-text\">process</code> method implement a code that handles the annotations.\nRemember that everything in <code class=\"language-text\">process</code> happens before your code is compiled.\nTherefore we do not use reflection here. Instead we have analogous <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.compiler/javax/lang/model/element/package-summary.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">Element</code> API</a>\nfor reflection-style inspection of the input source.</p>\n<p>The processing code for my annotations looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">TypeElement</span><span class=\"token punctuation\">></span></span> set<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RoundEnvironment</span> roundEnvironment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Element</span><span class=\"token punctuation\">></span></span> annotatedHandlers <span class=\"token operator\">=</span> roundEnvironment<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsAnnotatedWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Handler</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> handlersXml <span class=\"token operator\">=</span> annotatedHandlers<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token operator\">::</span><span class=\"token function\">generateHandlerXml</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">StringBuilder</span> finalDescriptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\" ?>\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n&lt;deployable-unit>\\n\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>handlersXml<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n&lt;/deployable-unit>\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">FileObject</span> file <span class=\"token operator\">=</span> processingEnv<span class=\"token punctuation\">.</span><span class=\"token function\">getFiler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createResource</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StandardLocation</span><span class=\"token punctuation\">.</span>SOURCE_OUTPUT<span class=\"token punctuation\">,</span> <span class=\"token string\">\"resources\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"descriptor.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Writer</span> writer <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">openWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        writer<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>finalDescriptor<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        writer<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ex<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">generateHandlerXml</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Element</span> handler<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> handlerPackage <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PackageElement</span><span class=\"token punctuation\">)</span> handler<span class=\"token punctuation\">.</span><span class=\"token function\">getEnclosingElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getQualifiedName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">String</span> fullHandlerClassName <span class=\"token operator\">=</span> handlerPackage <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span> handler<span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">StringBuilder</span> handlerXml <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    handlerXml<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\t&lt;handler>\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\t\\t&lt;class>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>fullHandlerClassName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/class>\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\t\\t&lt;session-fields>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// append fields</span>\n    handler<span class=\"token punctuation\">.</span><span class=\"token function\">getEnclosedElements</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>element <span class=\"token operator\">-></span> element<span class=\"token punctuation\">.</span><span class=\"token function\">getAnnotation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionField</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token operator\">::</span><span class=\"token function\">getFieldName</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>fieldName <span class=\"token operator\">-></span>\n                    handlerXml<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\t\\t\\t&lt;field>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>fieldName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/field>\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    handlerXml<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\t\\t&lt;/session-fields>\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\\t&lt;/handler>\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> handlerXml<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getFieldName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Element</span> element<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> methodName <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// setMyField</span>\n    <span class=\"token class-name\">String</span> fieldName <span class=\"token operator\">=</span> methodName<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// remove 'set' = MyField</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span>fieldName<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> fieldName<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//lowercase first letter = myField</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Of course it could be improved by using some templating engine (like <a href=\"https://velocity.apache.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Velocity</a>),\nbut for the purposes of this example, that is enough.\nI will not explain line by line what is happening in this method. </p>\n<p>Briefly:</p>\n<ol>\n<li>I find all elements annotated with <code class=\"language-text\">@Handler</code>.</li>\n<li>For each such element (class) I am looking for enclosed elements (setters) with <code class=\"language-text\">@SessionField</code> annotation.</li>\n<li>Based on the elements found, I glue them in the XML format</li>\n<li>I am saving the XML to a file <code class=\"language-text\">descriptor.xml</code></li>\n</ol>\n<p>The last thing you need to do is <strong>register the processor</strong>.\nThis can be done in two ways:</p>\n<p><strong>Classic approach</strong></p>\n<p>Create <code class=\"language-text\">src/resources/META-INF/services/javax.annotation.processing.Processor</code> file.\nIn this file write path to your annotation processor class.\nIf you want to register more processors write multiple paths, each in a new line.\nIn my case the content is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">pl.kdrozd.examples.annotationprocessor.DescriptorProcessor</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>3rd party approach</strong></p>\n<p>Add <code class=\"language-text\">com.google.auto.service.dependency.auto-service</code> dependency.</p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gradle line-numbers\"><code class=\"language-gradle\">annotationProcessor group: &#39;com.google.auto.service&#39;, name: &#39;auto-service&#39;, version: &#39;1.0&#39;\ncompile group: &#39;com.google.auto.service&#39;, name: &#39;auto-service&#39;, version: &#39;1.0&#39;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Annotate your annotation processor class with <code class=\"language-text\">@AutoService(Processor.class)</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token comment\">//...</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>auto<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AutoService</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@SupportedAnnotationTypes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"pl.kdrozd.examples.annotationprocessor.Handler\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"pl.kdrozd.examples.annotationprocessor.SessionField\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@SupportedSourceVersion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SourceVersion</span><span class=\"token punctuation\">.</span>RELEASE_11<span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@AutoService</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Processor</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DescriptorProcessor</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractProcessor</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Set</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">TypeElement</span><span class=\"token punctuation\">></span></span> set<span class=\"token punctuation\">,</span> <span class=\"token class-name\">RoundEnvironment</span> roundEnvironment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">//...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>It will automatically generate the file that has to be created in the ‘classic approach’.\nIt works very similar to the processor we just created :)</p>\n<p>And that’s it, our annotation processor module is ready. Let’s use it.</p>\n<h2>Use the annotation processing module</h2>\n<p>In a separate module (<code class=\"language-text\">my-random-application</code>) there is our application in which we want to use a freshly created processor module (<code class=\"language-text\">annotation-processor</code>).\nTo do this, just add a dependency in a <code class=\"language-text\">build.gradle</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-gradle line-numbers\"><code class=\"language-gradle\">dependencies {\n    annotationProcessor project(&quot;:annotation-processor&quot;)\n    implementation project(&quot;:annotation-processor&quot;)\n//...\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Done. Now, all you need to do is rebuild the application with <code class=\"language-text\">gradle clean build</code>\nand the descriptor should be generated to:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">build/generated/sources/annotationProcessor/java/main/resources/descriptor.xml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>If you want to use this processor module also in other projects,\nall you have to do is publish it to artifactory\nand change the dependency declaration (similarly how we declared <code class=\"language-text\">auto-service</code> above).</p>","frontmatter":{"title":"Custom Annotation Processor","date":"11 May 2021","description":null,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtJfMMWD//xAAbEAADAAIDAAAAAAAAAAAAAAABAgMABBESIf/aAAgBAQABBQI+tavQRYmfGPrpR1UKP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAIBBAMAAAAAAAAAAAAAAAABEQIQEkEyYWL/2gAIAQEABj8CR60LPlu2VUvohI//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhQTFR/9oACAEBAAE/ISoFzlwHD2Yj8iDbtQjmfWSjoJ//2gAMAwEAAgADAAAAEIAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAAIDAQEBAAAAAAAAAAAAAQARITFBYXGx/9oACAEBAAE/EDpjkgc9rcTscrTLofkQGslCgb1jypqCHkZ9jQvzhgz4T//Z"},"images":{"fallback":{"src":"/static/b4f15350cd052a82cd4210a5938ef13e/5267c/featured.jpg","srcSet":"/static/b4f15350cd052a82cd4210a5938ef13e/7284f/featured.jpg 750w,\n/static/b4f15350cd052a82cd4210a5938ef13e/29ba9/featured.jpg 1080w,\n/static/b4f15350cd052a82cd4210a5938ef13e/c8896/featured.jpg 1366w,\n/static/b4f15350cd052a82cd4210a5938ef13e/5267c/featured.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/b4f15350cd052a82cd4210a5938ef13e/b0356/featured.avif 750w,\n/static/b4f15350cd052a82cd4210a5938ef13e/48f75/featured.avif 1080w,\n/static/b4f15350cd052a82cd4210a5938ef13e/a5094/featured.avif 1366w,\n/static/b4f15350cd052a82cd4210a5938ef13e/f46cf/featured.avif 1920w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/b4f15350cd052a82cd4210a5938ef13e/57584/featured.webp 750w,\n/static/b4f15350cd052a82cd4210a5938ef13e/984df/featured.webp 1080w,\n/static/b4f15350cd052a82cd4210a5938ef13e/4a276/featured.webp 1366w,\n/static/b4f15350cd052a82cd4210a5938ef13e/9c00f/featured.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}}}},"previous":{"excerpt":"In this entry, I will explain why I decided to move the blog from WordPress to Gatsby. \nI will not describe in detail how I did it, because there are many such…","fields":{"slug":"/i-migrated-my-blog-from-wordpress-to-gatsby/"},"frontmatter":{"date":"25 April 2021","title":"I Migrated My Blog From Wordpress to Gatsby","description":null,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHTNEyWdUw//8QAGhABAQACAwAAAAAAAAAAAAAAAgMAAREiI//aAAgBAQABBQLVdjGuWpt7t1aXrOYpP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABcRAQADAAAAAAAAAAAAAAAAAAAREiH/2gAIAQIBAT8BriH/xAAbEAACAwADAAAAAAAAAAAAAAAAAQIRITFxgf/aAAgBAQAGPwLg1vC1Fejo6IyaP//EABoQAAMBAQEBAAAAAAAAAAAAAAABESExQbH/2gAIAQEAAT8hQq6V88HYzpKF5QWZsGtquF8NAMP/2gAMAwEAAgADAAAAEEwf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EEwG2//EABgRAAIDAAAAAAAAAAAAAAAAAAABESFR/9oACAECAQE/EHFHpQ//xAAdEAEAAwADAAMAAAAAAAAAAAABABEhMUFhUXGh/9oACAEBAAE/EAdy3i0Jud7+RKgKpoKar7mpKaou/N4nroD4yaCIBXkLEMFaut9z/9k="},"images":{"fallback":{"src":"/static/4b0663cbe28e7eebfc013a30cbf155a4/5267c/featured.jpg","srcSet":"/static/4b0663cbe28e7eebfc013a30cbf155a4/7284f/featured.jpg 750w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/29ba9/featured.jpg 1080w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/c8896/featured.jpg 1366w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/5267c/featured.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/4b0663cbe28e7eebfc013a30cbf155a4/b0356/featured.avif 750w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/48f75/featured.avif 1080w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/a5094/featured.avif 1366w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/f46cf/featured.avif 1920w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/4b0663cbe28e7eebfc013a30cbf155a4/57584/featured.webp 750w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/984df/featured.webp 1080w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/4a276/featured.webp 1366w,\n/static/4b0663cbe28e7eebfc013a30cbf155a4/9c00f/featured.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}}}},"next":{"excerpt":"In this post I will show you how to make a simple proxy server for SIP protocol.\nRecently I spent some time with netty and decided to create some simple…","fields":{"slug":"/sip-proxy-with-netty-and-sipstack/"},"frontmatter":{"date":"15 June 2021","title":"SIP proxy server with Netty and SipStack","description":null,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2LRYg//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECERAhIv/aAAgBAQABBQKVnWKFEWl//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAwADAAAAAAAAAAAAAAAAARAxABEh/9oACAEBAAY/AuZRXTNL/8QAHBABAQACAgMAAAAAAAAAAAAAAREAQRAhMVFh/9oACAEBAAE/IegsG7NZa0fGuG1alJkHzezBAtmf/9oADAMBAAIAAwAAABAjz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAAICAwADAAAAAAAAAAAAAAERIUEAMWEQcaH/2gAIAQEAAT8QMYACZOrwJtAiZ+t7788GFVHW5w7iKiIj2BvJ1IAZvP/Z"},"images":{"fallback":{"src":"/static/f7ce6b53d9404a990a7fe9291d72c140/1bf96/featured.jpg","srcSet":"/static/f7ce6b53d9404a990a7fe9291d72c140/85e43/featured.jpg 750w,\n/static/f7ce6b53d9404a990a7fe9291d72c140/1bf96/featured.jpg 898w","sizes":"100vw"},"sources":[{"srcSet":"/static/f7ce6b53d9404a990a7fe9291d72c140/966fc/featured.avif 750w,\n/static/f7ce6b53d9404a990a7fe9291d72c140/619fb/featured.avif 898w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/f7ce6b53d9404a990a7fe9291d72c140/a0cee/featured.webp 750w,\n/static/f7ce6b53d9404a990a7fe9291d72c140/32fe6/featured.webp 898w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.7126948775055679}}}}}},"pageContext":{"id":"2159c8f3-f569-5685-be5d-e68b5a3bb21a","previousPostId":"25d3d8dd-19eb-5346-b047-cb41bc59c047","nextPostId":"c6e0574b-e7d1-5aa1-9adb-1f84dbd11404"}},"staticQueryHashes":["2841359383"]}